//
//
//var navstr1 =`<ul id="navbot-list-ybox">
//									<li class="te">
//										<h4 class="te"><a href="#">美妆护肤</a></h4>
//										<ul class="te">
//											<li><a href="#">面膜</a></li>
//											<li><a href="#">乳液面霜</a></li>
//											<li><a href="#">化妆水</a></li>
//											<li><a href="#">护肤套装</a></li>
//											<li><a href="#">眼部护理</a></li>
//											<li><a href="#">面部精华</a></li>
//											<li><a href="#">美容仪</a></li>
//											<li><a href="#">洁面</a></li>
//											<li><a href="#">卸妆</a></li>
//											<li><a href="#">彩妆</a></li>
//											<li><a href="#">香水</a></li>
//											<li><a href="#">男士护肤</a></li>
//											<li><a href="#">口红</a></li>
//											<li><a href="#">美妆工具</a></li>
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">个人护理</a></h4>
//										<ul>
//											<li><a href="#">洗发水</a></li>
//											<li><a href="#">护发素</a></li>
//											<li><a href="#">沐浴乳</a></li>
//											<li><a href="#">苏口水</a></li>
//											<li><a href="#">牙膏</a></li>
//											<li><a href="#">身体乳</a></li>
//											<li><a href="#">护手霜</a></li>
//											<li><a href="#">身体护理</a></li>
//											<li><a href="#">卫生巾</a></li>
//											
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">进口美食</a></h4>
//										<ul>
//											<li><a href="#">坚果</a></li>
//											<li><a href="#">果干</a></li>
//											<li><a href="#">膨化</a></li>
//											<li><a href="#">糖果</a></li>
//											<li><a href="#">海苔</a></li>
//											<li><a href="#">饼干</a></li>
//											<li><a href="#">曲奇</a></li>
//											<li><a href="#">威化</a></li>
//											<li><a href="#">橄榄油</a></li>
//											<li><a href="#">泡面</a></li>
//											<li><a href="#">蜂蜜</a></li>
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">乳品冲饮</a></h4>
//										<ul>
//											<li><a href="#">牛奶</a></li>
//											<li><a href="#">全脂</a></li>
//											<li><a href="#">低脂</a></li>
//											<li><a href="#">饮料</a></li>
//											<li><a href="#">成人奶粉</a></li>
//											<li><a href="#">营养谷物</a></li>
//											<li><a href="#">咖啡</a></li>
//											<li><a href="#">水</a></li>
//											<li><a href="#">碳酸</a></li>
//											<li><a href="#">葡萄酒</a></li>
//											<li><a href="#">啤酒</a></li>
//											<li><a href="#">洋酒</a></li>
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">家庭清洁</a></h4>
//										<ul>
//											<li><a href="#">洗衣液</a></li>
//											<li><a href="#">洗衣凝珠</a></li>
//											<li><a href="#">洗衣粉</a></li>
//											<li><a href="#">洗洁精</a></li>
//											<li><a href="#">空气清新</a></li>
//											<li><a href="#">油污净</a></li>
//											<li><a href="#">多用途清洁剂</a></li>
//											<li><a href="#">马桶清洁</a></li>
//											<li><a href="#">卫浴清洁剂</a></li>
//										</ul>
//									</li>
//									<li class="te">
//										<h4 class="te"><a href="#">进口母婴</a></h4>
//										<ul class="te">
//											<li><a href="#">奶粉</a></li>
//											<li><a href="#">副食</a></li>
//											<li><a href="#">纸尿裤</a></li>
//											<li><a href="#">奶瓶奶嘴</a></li>
//											<li><a href="#">水杯餐具</a></li>
//											<li><a href="#">洗发沐浴</a></li>
//											<li><a href="#">宝宝护肤</a></li>
//											<li><a href="#">口腔清洁</a></li>
//											<li><a href="#">手推车</a></li>
//											<li><a href="#">安全座椅</a></li>
//											<li><a href="#">玩具</a></li>
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">品质家居</a></h4>
//										<ul>
//											<li><a href="#">吸尘器</a></li>
//											<li><a href="#">咖啡机</a></li>
//											<li><a href="#">保温杯</a></li>
//											<li><a href="#">榨汁机</a></li>
//											<li><a href="#">滤水壶</a></li>
//											<li><a href="#">锅具</a></li>
//											<li><a href="#">刀具</a></li>
//											<li><a href="#">乳胶枕</a></li>
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">鞋靴箱包</a></h4>
//										<ul>
//											<li><a href="#">GUCCI</a></li>
//											<li><a href="#">COACH</a></li>
//											<li><a href="#">MK</a></li>
//											<li><a href="#">MCM</a></li>
//											<li><a href="#">KENZO</a></li>
//											<li><a href="#">FURLA</a></li>
//											<li><a href="#">LONGCHAMP</a></li>
//											
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">腕表饰品</a></h4>
//										<ul>
//											<li><a href="#">雷朋</a></li>
//											<li><a href="#">citizen</a></li>
//											<li><a href="#">Pandora</a></li>
//											<li><a href="#">DW</a></li>
//											<li><a href="#">CASOI</a></li>
//											<li><a href="#">施华洛世奇</a></li>
//										</ul>
//									</li>
//				</ul>`
//
//
//
//
//
//var navstr2 =`<ul id="navbot-list-ybox">
//									<li>
//										<h4><a href="#">冷冻速食</a></h4>
//										<ul>
//											<li><a href="#">水饺</a></li>
//											<li><a href="#">混沌</a></li>
//											<li><a href="#">汤圆</a></li>
//											<li><a href="#">包子</a></li>
//											<li><a href="#">馒头花卷</a></li>
//											<li><a href="#">面条</a></li>
//											<li><a href="#">海鲜制品</a></li>
//											<li><a href="#">丸子</a></li>
//											<li><a href="#">成品菜</a></li>
//											<li><a href="#">年糕</a></li>
//											<li><a href="#">肉类熟食</a></li>
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">新鲜水果</a></h4>
//										<ul>
//											<li><a href="#">国产水果</a></li>
//											<li><a href="#">芒果</a></li>
//											<li><a href="#">菠萝</a></li>
//											<li><a href="#">苹果</a></li>
//											<li><a href="#">柚子</a></li>
//											<li><a href="#">猕猴桃</a></li>
//											<li><a href="#">柑橘橙</a></li>
//											<li><a href="#">柠檬</a></li>
//											<li><a href="#">牛油果</a></li>
//											<li><a href="#">火龙果</a></li>
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">精选肉类</a></h4>
//										<ul>
//											<li><a href="#">牛肉</a></li>
//											<li><a href="#">羊肉</a></li>
//											<li><a href="#">猪肉</a></li>
//											<li><a href="#">牛排</a></li>
//											<li><a href="#">牛腱</a></li>
//											<li><a href="#">牛腩</a></li>
//											<li><a href="#">牛尾</a></li>
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">禽类蛋类</a></h4>
//										<ul>
//											<li><a href="#">鸡肉</a></li>
//											<li><a href="#">鸭肉</a></li>
//											<li><a href="#">鸽肉</a></li>
//											<li><a href="#">鸡蛋</a></li>
//											<li><a href="#">咸鸭蛋</a></li>
//											<li><a href="#">皮蛋</a></li>
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">海鲜水产</a></h4>
//										<ul>
//											<li><a href="#">鱼类</a></li>
//											<li><a href="#">三文鱼</a></li>
//											<li><a href="#">巴沙鱼</a></li>
//											<li><a href="#">鳕鱼</a></li>
//											<li><a href="#">黄鱼</a></li>
//											<li><a href="#">虾类</a></li>
//											<li><a href="#">虾仁</a></li>
//											<li><a href="#">蟹类</a></li>
//											<li><a href="#">贝类</a></li>
//											<li><a href="#">扇贝</a></li>
//											<li><a href="#">海参</a></li>
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">烘焙乳品</a></h4>
//										<ul>
//											<li><a href="#">低温鲜奶</a></li>
//											<li><a href="#">新鲜酸奶</a></li>
//											<li><a href="#">冰激凌</a></li>
//											<li><a href="#">低温奶酪</a></li>
//											<li><a href="#">黄油</a></li>
//											<li><a href="#">低温饮品</a></li>
//										</ul>
//									</li>
//									<li>
//										<h4><a href="#">时令特色</a></h4>
//										<ul>
//											<li><a href="#">柚子</a></li>
//											<li><a href="#">菠萝</a></li>
//											<li><a href="#">柑橘橙</a></li>
//											<li><a href="#">水蜜桃</a></li>
//											<li><a href="#">南汇8424西瓜</a></li>
//										</ul>
//									</li>
//									
//				</ul>`
//////导航栏鼠标移动事件！
//var onavbot1 = document.getElementById("navbot1");
//var onavbot2 = document.getElementById("navbot2");
//var onavbot3 = document.getElementById("navbot3");
//var onavbot4 = document.getElementById("navbot4");
//var onavbot5 = document.getElementById("navbot5");
//var onavbot6 = document.getElementById("navbot6");
//var onavbot7 = document.getElementById("navbot7");
//var onavbot8 = document.getElementById("navbot8");
//var onavbot9 = document.getElementById("navbot9");
//var onavbot10 = document.getElementById("navbot10");
//var onavbot11 = document.getElementById("navbot11");
//var onavbot12 = document.getElementById("navbot12");
//var onavbot13 = document.getElementById("navbot13");
//var onavbot14 = document.getElementById("navbot14");
//
//
//
//
//function navbotmouse(obj,str){
//	
//	if( obj == null || obj == undefined) return;
//	obj.onmouseover = function(){	
//		obj.children[1].style.display = "block";
//		obj.children[1].innerHTML = str;
//		obj.style.background = "#888";
//	}
//	obj.onmouseout = function () {
//		obj.children[1].style.display = "none";
//		obj.style.background = "";
//	}
//}
//navbotmouse(onavbot1,navstr1);
//navbotmouse(onavbot2,navstr2);
//navbotmouse(onavbot3,navstr1);
//navbotmouse(onavbot4,navstr2);
//navbotmouse(onavbot5,navstr1);
//navbotmouse(onavbot6,navstr2);
//navbotmouse(onavbot7,navstr1);
//navbotmouse(onavbot8,navstr2);
//navbotmouse(onavbot9,navstr1);
//navbotmouse(onavbot10,navstr2);
//navbotmouse(onavbot11,navstr1);
//navbotmouse(onavbot12,navstr2);
//navbotmouse(onavbot13,navstr1);
//navbotmouse(onavbot14,navstr2);
//
//
//
//$(".cover div").mouseover(function(){
//	$(this).children("div").show()
//})
//
//
//$(".cover div").mouseout(function(){
//	$(this).children("div").stop().hide()
//})
//
//
//
//
//$(function(){
//	var cookie=$.cookie("user");
//	var login=JSON.parse(cookie);
//	if(cookie){
//		$(".login-button").html(login.Phone)
//		$(".registered").html("退出")
//	}
//	
//})
//
//$(".registered").click(function(){
//	var value = $(this).html();
//	if( value=="退出"){
//		$.cookie("user", null);
//		location.href = "index.html";
//	}
//	else{
//		location.href = "register.html";
//	}
//})
//
//
//$(".login-button").click(function(){
//		location.href = "login.html";
//})

class myPublic
{
	constructor(options){
		this.registered = options.registered;
		this.btnlogin = options.btnlogin;
		this.cover = options.cover;
		this.navbotlist = options.navbotlist;
		this.init();
		this.addListener();
	}
	init(){
		var cookie=$.cookie("user");
		var login=JSON.parse(cookie);
		if(cookie){
			this.btnlogin.html(login.Phone)
			this.registered.html("退出")
		}
		
	}
	
	addListener(){
		var that = this;
		this.cover.mouseover(function(){
			$(this).children("div").show()
		})
		
		this.cover.mouseout(function(){
			$(this).children("div").stop().hide()
		})
		
		
		this.registered.click(function(){
			var value = $(this).html();
			if( value=="退出"){
				$.cookie("user", null);
				location.href = "index.html";
			}
			else{
				location.href = "register.html";
			}
		})
		
		this.btnlogin.click(function(){
			location.href = "login.html";
		})
		
		this.navbotlist.children().each(function(index, item){
			that.navbotmouse(item)
		});
	}
		
	navbotmouse(obj){
		var that = this;
		if( obj == null || obj == undefined) return;
		obj.onmouseover = function(){	
			$.ajax({
				type:"get",
				url:"data/menu.json",
				success:function(res){		
					var str = "";
					str +=`<ul id="navbot-list-ybox">`;
					for( var  i =0; i <res.length; i++){
						var className = res[i].className;
						str+=`<li class="${className}">
							<h4 class="${className}"><a href="#">${res[i].title}</a></h4>
							<ul class="${className}">`;
							for( var j =0; j <res[i].children.length; j++){
								str +=`<li><a href="${res[i].children[j].src}">${res[i].children[j].title}</a></li>`;						
							}
						str +=`</ul>`;
						str +=`</li>`
						
					}
					str +=`</ul>`;
					obj.children[1].style.display = "block";
					obj.children[1].innerHTML = str;
					obj.style.background = "#888";

					that.navbotlist.children().each(function(index,item){
						if( item == obj ) return;
						item.children[1].style.display = "none";
						item.style.background = "";
					});
				}				
			});
		}
//		obj.onmouseout = function () {
//			obj.children[1].style.display = "none";
//			obj.style.background = "";
//		}
	}
}

new myPublic({
	registered:$(".registered")
	,btnlogin:$(".login-button")
	,cover:$(".cover div")
	,navbotlist:$(".nav-bot-list")
})

